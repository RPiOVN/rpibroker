# Client Specification Overview
This document contains the specifications for the Client software. The Client software is defined by the following
high-level features:

* Docker container with SSH
* Persistant Storage
* Encryption
* Deployment Packages (pre-configured scripts for setting up apps like webservers, file sharing, etc.)
* Testing

The sections below detail the specifications for each of these features:

## Docker Container
A Docker container is generated by the `registerDevice.js` application. The user initiates the creation
of the Docker container by registering the device in the marketplace. They are given a GUID, which they
then copy to the file `deviceGUID.json`. `registerDevice.js` reads this file and makes an registration
REST API call to the server. 

After a successful registration call, the server returns a computer generated username, password, and port.
The port is used to establish a reverse SSH tunnel to the Docker container. The username and password are
used to a user account for the Docker container. The email and password are emailed to the renter.

When the renter destroys their contract, the Docker container is destroyed and all persistant data wiped.
A new Docker container with new login credentials is generated for the next renter.

## Persistant Storage
Persistant storage can take many forms, but a USB flash drive will be encouraged, as SD cards have shown
reliability issues. Most IoT devices, like the Raspberry Pi can boot off an SD card. Extra storage can
easily be accomidated through USB flash drives or even USB external hard drives. 128GB Flash drives will
be the standard due to their availability and low prices.

Part of the installation instructions for client software will include commands for mounting a USB flash
drive and setting it up for persistant storage with Docker.

## Encryption
Encryption managed by the device owner has been explored, but found ineffective. It will be best to put the
responsibility and encryption keys in the hands of the renter. Owners will be under no obligation to provide
encrypted drives. However, instructions for setting up LUKS encryption inside the renters Docker container
will be provided by this project.

This is an excellent guide that can be adapted to encrypt persistant storage in a Docker container:
https://launchbylunch.com/posts/2014/Jan/13/encrypting-docker-on-digitalocean/

## Deployment Packages
A collection of scripts will be made available to renters. These are preconfigured shell scripts or some other
type of package manager that allows them to quickly deploy common web services like NextCloud, a blog, a webserver,
a single page application development environment, etc. Easy scripts to deploy many of 
[these use cases](https://raspberry-hosting.com/en/applications).

This project will rely on user contributions for this section. If interested, please see our
[Contributions README](../CONTRIBUTING.md).

## Testing
Unit testing is initially planning to use Mocha, but we could use any platform at this stage. We could really use
help with getting a solid unit testing library in place for Client software.
